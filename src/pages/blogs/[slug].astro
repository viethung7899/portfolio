---
import BaseLayout from "@layouts/BaseLayout.astro";

const slug = Astro.params.slug;
const posts = await Astro.glob('../../content/posts/**/*.mdx');
const post = posts.find((post) => post.frontmatter.slug === slug);

if (!post) {
  return new Response(null, {
    status: 404,
    statusText: 'Not found'
  });
}

const { Content, frontmatter } = post;
---

<BaseLayout title={frontmatter.title}>
  <article class="flex flex-col px-4 py-8 gap-6">
    <h1 class="text-3xl font-bold">{frontmatter.title}</h1>
    <h5 class="text-black/50 dark:text-white/50 italic">{new Date(frontmatter.date).toDateString()}</h5>
    <Content />
  </article>
</BaseLayout>