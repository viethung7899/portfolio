---
import BaseLayout from "@layouts/BaseLayout.astro";
import type { MDXInstance } from "astro";
import dayjs from "dayjs";
import type { PostFrontMatter } from "src/types";

export async function getStaticPaths() {
  const posts = await Astro.glob<PostFrontMatter>('../../content/posts/**/*.mdx');
  return posts.map(post => ({
    params: {
      slug: post.frontmatter.slug
    },
    props: {
      post
    }
  }))
}

export type Props = {
  post: MDXInstance<PostFrontMatter>;
}

const { Content, frontmatter } = Astro.props.post;

const date = dayjs(frontmatter.date).format("D MMMM YYYY")
---

<BaseLayout title={frontmatter.title}>
  <article class="px-4 py-8 md:items-center flex flex-col gap-4">
    <h1 class="text-4xl md:text-6xl font-bold">{frontmatter.title}</h1>
    <h5 class="text-black/50 dark:text-white/50">{date}</h5>
    <div class="w-full prose max-w-none prose-sm md:prose-base prose-orange dark:prose-invert dark:prose-teal">
      <Content />
    </div>
  </article>
</BaseLayout>